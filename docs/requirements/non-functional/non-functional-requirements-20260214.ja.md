# 非機能要件書

**プロジェクト名**: Cook Bookmark
**作成日**: 2026-02-14
**バージョン**: 1.0

---

## NFR-001: パフォーマンス

### レスポンスタイム

- **ページ表示**: 3秒未満（標準的、厳密な要件なし）
- **AI抽出**: 5〜10秒かかる場合あり。ローディングインジケーター必須
- **検索・フィルター**: 1秒未満（クライアントサイドまたはシンプルなDBクエリ）

### スループット

- **同時接続ユーザー数**: 最大5名（家族利用）
- **特別なスループット要件なし**（この規模では不要）

### 測定方法

- 標準的なVercelアナリティクス（必要に応じて）
- 専用の負荷テストは不要

---

## NFR-002: 可用性・信頼性

### 可用性

- **ホスティング**: Vercelサーバーレス（標準可用性 〜99.9%）
- **データベース**: Tursoマネージドサービス（標準可用性）
- **カスタムSLA不要**（家族利用のため）

### 信頼性

- **データバックアップ**: Turso自動バックアップ（マネージドサービスのデフォルト）
- **エラーハンドリング**: AI抽出失敗時のグレースフルなエラーメッセージ

---

## NFR-003: セキュリティ

### 認証

- **方式**: Google OAuth 2.0のみ（Better Auth経由）
- **セッション**: HttpOnlyおよびSecureフラグ付きCookie（本番環境）
- **追加のMFA不要**
- **パスワード管理不要**

### 通信

- **プロトコル**: HTTPS（Vercelにより強制）
- **APIキー**: 環境変数に保存、クライアントに公開しない

### データ保護

- **個人データ**: Googleプロフィール情報のみ（名前、メール、画像）
- 基本的なユーザープロフィール以外の**機密データなし**
- **GDPR準拠不要**（家族利用のみ）

---

## NFR-004: ユーザビリティ

### デバイスサポート

- **メイン**: スマートフォン（モバイルファーストデザイン）
- **サブ**: デスクトップ / タブレット
- **デザインアプローチ**: Tailwind CSSを使用したレスポンシブ、モバイルファースト

### UI言語

- **日本語**（すべてのUIテキストを日本語で表示）

### アクセシビリティ

- 標準的なセマンティックHTML
- 十分なカラーコントラスト
- タッチフレンドリーなボタンサイズ（モバイル向け最小44x44px）

### ユーザーエクスペリエンス

- レシピ登録は3ステップ以内で完了すること:
  1. URLを貼り付け
  2. AI抽出データをレビュー
  3. 確認して保存
- 検索・フィルタリングはメイン画面から即座にアクセス可能であること

---

## NFR-005: スケーラビリティ

- 5ユーザーを超える**スケーラビリティ要件なし**
- Vercelサーバーレスが必要に応じて自動スケール（設定不要）
- Turso無料枠で想定データ量に十分

---

## NFR-006: 保守性

### コード品質

- **言語**: TypeScript（strictモード）で型安全性を確保
- **フレームワーク**: Next.js App Router + React Server Components
- **ORM**: 型付きスキーマのDrizzle ORM
- **UI**: 一貫したデザインのshadcn/uiコンポーネント

### データベース管理

- Drizzle Kitマイグレーションでスキーマ管理
- 利用可能スクリプト: `db:generate`, `db:migrate`, `db:push`, `db:studio`

### デプロイ

- **プラットフォーム**: VercelとGit連携
- **プロセス**: mainブランチにプッシュ → 自動デプロイ
- **ゼロダウンタイム**: Vercelがローリングデプロイを処理

---

## NFR-007: 制約

### 開発

- **期間**: 1ヶ月（MVP）
- **チーム**: 個人開発者 + AI支援
- **予算**: 無料枠サービス（Vercel, Turso, Gemini API無料枠）

### 外部依存サービス

| サービス | 制約 |
|---|---|
| Gemini API | レート制限およびリクエストあたりのトークン制限 |
| Turso | 無料枠: 9GBストレージ、月間5億行読み取り |
| Vercel | 無料枠: 100GB帯域幅、サーバーレス関数制限 |
| Google OAuth | Google Cloud Consoleプロジェクト設定が必要 |

### 技術的制約

- Next.js 16 App Router（Pages Routerは不使用）
- SQLite互換データベースのみ（Turso/libSQL）
- サーバーサイドの永続ストレージなし（サーバーレス環境）
